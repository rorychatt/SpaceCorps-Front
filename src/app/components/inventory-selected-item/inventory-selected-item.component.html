<div class="card bg-base-100 shadow-md p-4">
  <div class="card-body">
    <h2 class="card-title">Selected Item</h2>
    <ng-container *ngIf="selectedItem; else noItemSelected">
      <p><strong>ID:</strong> {{ selectedItem.id }}</p>
      <p><strong>Name:</strong> {{ selectedItem.name }}</p>
      
      <!-- Loop through each slot group for the selected item -->
      <div *ngFor="let mapping of getChildMapping(selectedItem)" class="mb-4">
        <h3 class="mb-2">{{ mapping.title }}</h3>
        <div class="flex gap-2">
          <!-- Always render exactly maxSlots squares -->
          <div *ngFor="let slotIndex of getSlots(mapping.maxSlots); let i = index" class="w-16 h-16 aspect-square">
            <ng-container *ngIf="selectedItem[mapping.childrenKey] && selectedItem[mapping.childrenKey][i] as child; else emptySlot">
              <div class="child-item border p-2 w-full h-full flex items-center justify-center"
                   draggable="true">
                <p class="text-xs text-center">{{ child.name }}</p>
              </div>
            </ng-container>
            <ng-template #emptySlot>
              <div class="empty-slot border p-2 w-full h-full flex items-center justify-center cursor-pointer bg-gray-100"
                   (dragover)="onDragOver($event)"
                   (drop)="onDrop($event, mapping, i)">
                <p class="text-xs">Empty Slot</p>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
    </ng-container>
    
    <ng-template #noItemSelected>
      <p>No item selected.</p>
    </ng-template>
  </div>
</div>